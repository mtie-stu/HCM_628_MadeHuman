@model MadeHuman_Admin.Models.ZoneManagementViewModel

@{
    ViewData["Title"] = "Zone Management";
    var zones = new List<string> { "", "Inbound", "Outbound" };
    var currentPage = Model.CurrentPage;
    var totalPages = Model.TotalPages;
    var selectedZone = Model.SelectedZone ?? "";
    var searchTerm = Model.SearchTerm ?? "";
    var baseUrl = Model.BaseUrl ?? "/Staff/ZoneManagement";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
<style>
    /* Màu chữ mặc định cho page-link */
    .pagination .page-link {
        color: #fd7e14; /* Bootstrap warning (cam) */
    }

        /* Khi hover */
        .pagination .page-link:hover {
            color: #fff;
            background-color: #fd7e14;
            border-color: #fd7e14;
        }

    /* Khi đang active */
    .pagination .page-item.active .page-link {
        background-color: #fd7e14;
        border-color: #fd7e14;
        color: #fff;
    }

    /* Khi focus */
    .pagination .page-link:focus {
        box-shadow: 0 0 0 0.25rem rgba(253, 126, 20, 0.25);
    }
</style>

<div class="container my-5">
    <form action="@baseUrl" method="post" class="row g-3 align-items-end mb-4">
        <div class="col-md-3">
            <label for="zone" class="form-label fw-semibold">Zone</label>
            <select id="zone" name="zone" onchange="this.form.submit()" class="form-select">
                @foreach (var zone in zones)
                {
                    var label = string.IsNullOrEmpty(zone) ? "All" : zone;
                    if (zone == selectedZone)
                    {
                        <option value="@zone" selected>@label</option>
                    }
                    else
                    {
                        <option value="@zone">@label</option>
                    }
                }
            </select>
        </div>

        <div class="col-md-4">
            <label for="searchTerm" class="form-label fw-semibold">Search</label>
            <div class="input-group">
                <input id="searchTerm" name="searchTerm" value="@searchTerm" type="text" class="form-control" placeholder="Search" />
                <span class="input-group-text bg-white"><i class="fas fa-search text-muted"></i></span>
            </div>
        </div>

        <div class="col-md-2">
            <button type="submit" class="btn btn-warning w-100 fw-semibold">Search</button>
        </div>
    </form>

    <h5 class="fw-semibold mb-3">List Product</h5>

    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
            <thead class="table-secondary">
                <tr>
                    <th>Zone</th>
                    <th>WarehouseLocationsCode</th>
                    <th>InventoryID</th>
                    <th>SKUID</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Products.Any())
                {
                    foreach (var item in Model.Products)
                    {
                        <tr>
                            <td>@item.Zone</td>
                            <td>@item.WarehouseLocationsCode</td>
                            <td>@item.InventoryID</td>
                            <td>@item.SKUID</td>
                            <td>@item.Quantity</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center text-muted py-4">No data found.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    @if (totalPages > 1)
    {
        <nav class="mt-4" aria-label="Pagination">
            <ul class="pagination justify-content-center">

                <!-- Nút Previous -->
                @if (currentPage > 1)
                {
                    <li class="page-item">
                        <a class="page-link" href="@($"{baseUrl}?page={currentPage - 1}&zone={selectedZone}&searchTerm={searchTerm}")">
                            Previous
                        </a>
                    </li>
                }
                else
                {
                    <li class="page-item disabled">
                        <span class="page-link">Previous</span>
                    </li>
                }

                <!-- Các trang -->
                @for (var i = 1; i <= totalPages; i++)
                {
                    <li class="page-item @(i == currentPage ? "active" : "")">
                        <a class="page-link" href="@($"{baseUrl}?page={i}&zone={selectedZone}&searchTerm={searchTerm}")">
                            @i
                        </a>
                    </li>
                }

                <!-- Nút Next -->
                @if (currentPage < totalPages)
                {
                    <li class="page-item">
                        <a class="page-link" href="@($"{baseUrl}?page={currentPage + 1}&zone={selectedZone}&searchTerm={searchTerm}")">
                            Next
                        </a>
                    </li>
                }
                else
                {
                    <li class="page-item disabled">
                        <span class="page-link">Next</span>
                    </li>
                }

            </ul>
        </nav>
    }
</div>
