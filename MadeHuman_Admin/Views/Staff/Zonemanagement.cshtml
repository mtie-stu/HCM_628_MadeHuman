@model IEnumerable<MadeHuman_Admin.Models.ZoneProduct>

@{
    ViewData["Title"] = "Zone Management";
    var zones = new List<string> { "", "Inbound", "Outbound" };
    var currentPage = (int)(ViewBag.CurrentPage ?? 1);
    var totalPages = (int)(ViewBag.TotalPages ?? 1);
    var selectedZone = ViewBag.SelectedZone as string ?? "";
    var searchTerm = ViewBag.SearchTerm as string ?? "";
    var baseUrl = ViewBag.BaseUrl as string ?? "/Staff/ZoneManagement";
}

<div class="container mx-auto p-8 rounded-2xl">
    <form action="@baseUrl" method="post" class="flex flex-col sm:flex-row sm:space-x-20 mb-10">
        <div class="flex flex-col mb-6 sm:mb-0">
            <label for="zone" class="font-semibold text-lg mb-2">Zone</label>
            <select id="zone" name="zone" onchange="this.form.submit()"
        class="w-64 h-10 rounded-md border border-gray-200 bg-gray-100 text-gray-600 text-sm px-4 appearance-none relative"
        style="background-image: url('data:image/svg+xml,%3csvg fill=\'%23f59e0b\' height=\'20\' viewBox=\'0 0 20 20\' width=\'20\' xmlns=\'http://www.w3.org/2000/svg\'%3e%3cpath d=\'M7 10l5 5 5-5z\'/%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1em;">
                @foreach (var zone in zones)
                {
                    var label = string.IsNullOrEmpty(zone) ? "All" : zone;
                    if (zone == selectedZone)
                    {
                        <option value="@zone" selected>@label</option>
                    }
                    else
                    {
                        <option value="@zone">@label</option>
                    }
                }
            </select>
        </div>

        <div class="flex flex-col">
            <label for="searchTerm" class="font-semibold text-lg mb-2">Search</label>
            <div class="relative w-64">
                <input id="searchTerm" name="searchTerm" value="@searchTerm" type="text" placeholder="Search"
                       class="w-full h-10 rounded-md border border-gray-200 bg-gray-100 text-gray-600 text-sm px-4 pr-10" />
                <i class="fas fa-search absolute right-3 top-1/2 -translate-y-1/2 text-gray-600 text-sm"></i>
            </div>
        </div>

        <div class="flex items-end">
            <button type="submit" class="ml-4 h-10 px-4 rounded-md bg-orange-500 text-white text-sm font-semibold">Search</button>
        </div>
    </form>

    <h2 class="font-semibold text-base mb-3">List Product</h2>

    <div class="overflow-x-auto rounded-lg">
        <table class="table-auto w-full text-left text-sm border-collapse">
            <thead class="bg-gray-300 text-gray-700">
                <tr>
                    <th class="py-2 px-3">Zone</th>
                    <th class="py-2 px-3">WarehouseLocationsCode</th>
                    <th class="py-2 px-3">InventoryID</th>
                    <th class="py-2 px-3">SKUID</th>
                    <th class="py-2 px-3">Quantity</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Any())
                {
                    var rowIndex = 0;
                    foreach (var item in Model)
                    {
                        <tr class="@(rowIndex % 2 == 0 ? "bg-white" : "bg-gray-100")">
                            <td class="py-2 px-3">@item.Zone</td>
                            <td class="py-2 px-3">@item.WarehouseLocationsCode</td>
                            <td class="py-2 px-3">@item.InventoryID</td>
                            <td class="py-2 px-3">@item.SKUID</td>
                            <td class="py-2 px-3">@item.Quantity</td>
                        </tr>
                        rowIndex++;
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="py-4 px-3 text-center text-gray-500">No data found.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div class="mt-6">
        <nav aria-label="Pagination">
            <ul class="inline-flex -space-x-px">
                @for (var i = 1; i <= totalPages; i++)
                {
                    <li>
                        <a href="@($"{baseUrl}?page={i}&zone={selectedZone}&searchTerm={searchTerm}")"
                           class="px-3 py-2 border border-gray-300 @(i == currentPage ? "bg-orange-500 text-white" : "bg-white text-gray-700")">
                            @i
                        </a>
                    </li>
                }
            </ul>
        </nav>
    </div>
</div>
